webpackJsonp([1],{Onut:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("ZyLO"),s={name:"",data:function(){return{dialogFormVisible:!1,findCategory_list:[],Shop_type:{type_1:{},type_2:{},type_3:{}},last_type:{},data5:[],defaultProps:{children:"data",label:"name"},details_obj:{}}},methods:{append:function(t){console.log(t),this.details_obj={categoryname:"",commisrate:"",parentcategoryid:t?t.id:"",depth:t?t.depth+1:1,shopcategoryid:this.last_type.id},this.dialogFormVisible=!0},modify:function(t){for(var e in console.log(t),this.details_obj={},t)this.details_obj[e]=t[e];this.details_obj.shopcategoryid=this.last_type.id,this.dialogFormVisible=!0},submitForm:function(){this.details_obj.id?Object(a.b)("post","/mall/mobile/productCategory/updateCategory",this.details_obj,this.addProCategory):Object(a.b)("post","/mall/mobile/productCategory/addProCategory",this.details_obj,this.addProCategory)},remove:function(t,e){var o=this;this.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(e.id),Object(a.b)("post","/mall/mobile/productCategory/deleteCategoryById",{id:e.id},o.deleteCategoryById)}).catch(function(){})},addProCategory:function(t){console.log(t),this.dialogFormVisible=!1,this.$message({showClose:!0,message:1==t?"设置成功":"系统错误，请联系管理元",type:1==t?"success":"error"}),this.showProcateByshopId()},deleteCategoryById:function(t){console.log(t),this.dialogFormVisible=!1,this.$message({showClose:!0,message:t.message,type:1==t.success?"success":"error"}),this.showProcateByshopId()},findCategory:function(){Object(a.b)("post","/mall/mobile/shopcategory/findCategory","",this.findCategory_returun)},findCategory_returun:function(t){console.log("商铺分类",t),this.findCategory_list=t,this.Shop_type.type_1=t[0],this.Shop_type.type_1.data&&this.Shop_type.type_1.data.length>0&&(this.Shop_type.type_2=this.Shop_type.type_1.data[0]),this.Shop_type.type_2.data&&this.Shop_type.type_2.data.length>0&&(this.Shop_type.type_3=this.Shop_type.type_2.data[0]),this.last_type=this.Shop_type.type_3.id?this.Shop_type.type_3:this.Shop_type.type_2.id?this.Shop_type.type_2:this.Shop_type.type_1.id?this.Shop_type.type_1:{},console.log("最后一级Id",this.last_type),this.showProcateByshopId()},change_findCategory:function(t,e,o){t&&(this.Shop_type.type_1.data&&this.Shop_type.type_1.data.length>0?this.Shop_type.type_2=this.Shop_type.type_1.data[0]:this.Shop_type.type_2={}),this.Shop_type.type_3=this.Shop_type.type_2.data&&this.Shop_type.type_2.data.length>0?this.Shop_type.type_2.data[0]:{},this.last_type=this.Shop_type.type_3.id?this.Shop_type.type_3:this.Shop_type.type_2.id?this.Shop_type.type_2:this.Shop_type.type_1.id?this.Shop_type.type_1:{},console.log("最后一级",this.last_type),this.showProcateByshopId()},showProcateByshopId:function(t){Object(a.b)("post","/mall/mobile/productCategory/showProcateByshopId",{typeId:this.last_type.id},this.showProcateByshopId_return)},showProcateByshopId_return:function(t){console.log(t),this.data5=t}},mounted:function(){this.findCategory()},created:function(){}},i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"CommodityType"}},[t._m(0),t._v(" "),o("section",{staticClass:"content"},[o("div",{staticClass:"box box-primary"},[o("div",{staticClass:"box-body"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-lg-12 box_1"},[o("div",{staticClass:"title_1"},[t._v("请选择行业类型：")]),t._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.Shop_type.type_1,expression:"Shop_type.type_1"}],staticClass:"form-control",on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.Shop_type,"type_1",e.target.multiple?o:o[0])},function(e){t.change_findCategory(!0,!0)}]}},t._l(t.findCategory_list,function(e){return o("option",{domProps:{value:e}},[t._v(t._s(e.name))])})),t._v(" "),t.Shop_type.type_1.data&&t.Shop_type.type_1.data.length>0?o("select",{directives:[{name:"model",rawName:"v-model",value:t.Shop_type.type_2,expression:"Shop_type.type_2"}],staticClass:"form-control",on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.Shop_type,"type_2",e.target.multiple?o:o[0])},function(e){t.change_findCategory(!1,!0)}]}},t._l(t.Shop_type.type_1.data,function(e){return o("option",{domProps:{value:e}},[t._v(t._s(e.name))])})):t._e(),t._v(" "),t.Shop_type.type_2.data&&t.Shop_type.type_2.data.length>0?o("select",{directives:[{name:"model",rawName:"v-model",value:t.Shop_type.type_3,expression:"Shop_type.type_3"}],staticClass:"form-control",on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.Shop_type,"type_3",e.target.multiple?o:o[0])},function(e){t.change_findCategory(!1,!1,!0)}]}},t._l(t.Shop_type.type_2.data,function(e){return o("option",{domProps:{value:e}},[t._v(t._s(e.name))])})):t._e(),t._v(" "),o("button",{staticClass:"btn btn-info",on:{click:function(e){t.append(!1)}}},[t._v("添加")])]),t._v(" "),o("div",{staticClass:"col-lg-12 box_1"},[t.data5.length>0?o("div",{staticClass:"title_1"},[t._v("产品分类详情：")]):t._e(),t._v(" "),o("el-tree",{attrs:{data:t.data5,"node-key":"id","default-expand-all":"",props:t.defaultProps,"expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.node,s=e.data;return o("div",{staticClass:"box_2",staticStyle:{"margin-bottom":"10px"}},[o("div",{staticClass:"name"},[t._v(t._s(s.categoryname))]),t._v(" "),o("div",{staticClass:"Proportion"},[s.data&&0==s.data.length||!s.data?o("div",[t._v("\n\t\t\t\t\t\t\t\t        \t\t让利比例："),o("span",[t._v(t._s(s.commisrate))])]):t._e()]),t._v(" "),o("span",[3!=s.depth?o("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){t.append(s,a)}}},[t._v("添加下级")]):t._e(),t._v(" "),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.modify(s)}}},[t._v("设置相关参数")]),t._v(" "),o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){t.remove(a,s)}}},[t._v("删除")])],1)])}}])})],1)])])])]),t._v(" "),o("el-dialog",{attrs:{width:"500px",title:"详细信息",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("form",{attrs:{role:"form"},on:{submit:function(e){e.preventDefault(),t.submitForm()}}},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[t._v("分类名称")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.details_obj.categoryname,expression:"details_obj.categoryname"}],staticClass:"form-control",attrs:{type:"text",required:"",placeholder:"请输入名称"},domProps:{value:t.details_obj.categoryname},on:{input:function(e){e.target.composing||t.$set(t.details_obj,"categoryname",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[t._v("分润比例")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.details_obj.commisrate,expression:"details_obj.commisrate"}],staticClass:"form-control",attrs:{type:"number",required:"",min:"0.01",step:"0.01",max:"100",placeholder:"分润比例"},domProps:{value:t.details_obj.commisrate},on:{input:function(e){e.target.composing||t.$set(t.details_obj,"commisrate",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"dialog-footer text-right",attrs:{slot:"footer"},slot:"footer"},[o("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),o("button",{staticClass:"btn btn-default",attrs:{type:"submit"}},[t._v("确定")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"content-header"},[e("h1",[this._v("\n        \t\t商品类型管理\n    \t\t"),e("small",[this._v("Version 1.0")])]),this._v(" "),e("ol",{staticClass:"breadcrumb"},[e("li",[e("a",{attrs:{href:"javascript:;"}},[e("i",{staticClass:"fa fa-dashboard"}),this._v(" Home")])]),this._v(" "),e("li",{staticClass:"active"},[this._v("Dashboard")])])])}]};var n=o("VU/8")(s,i,!1,function(t){o("Wcv0")},null,null);e.default=n.exports},Wcv0:function(t,e){}});
//# sourceMappingURL=1.41f1456dcf8b8bc70351.js.map