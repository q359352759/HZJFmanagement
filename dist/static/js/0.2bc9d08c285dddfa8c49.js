webpackJsonp([0],{"1alW":function(t,o,e){var a=e("kM2E");a(a.S,"Number",{isInteger:e("AKgy")})},AKgy:function(t,o,e){var a=e("EqjI"),r=Math.floor;t.exports=function(t){return!a(t)&&isFinite(t)&&r(t)===t}},RKwH:function(t,o){},"RRo+":function(t,o,e){t.exports={default:e("c45H"),__esModule:!0}},c45H:function(t,o,e){e("1alW"),t.exports=e("FeBl").Number.isInteger},y4od:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=e("RRo+"),r=e.n(a),i=e("ZyLO"),n={name:"",data:function(){var t=this;return{dialogFormVisible:!1,details_obj:{},form:{categoryname:"",maximumratio:"",parent_id:"",contractratio:"",create_by:""},rules:{categoryname:[{required:!0,message:"请输入分类名称",trigger:"blur"}],maximumratio:[{validator:function(o,e,a){if(!e)return a(new Error("最大让利不能为空"));r()(e)?r()(t.form.contractratio)?e<t.form.contractratio?a(new Error("最大让利不能小于"+t.form.contractratio)):e>100?a(new Error("最大让利不能超过100")):a():e<1?a(new Error("最大让利不能小于1")):e>100?a(new Error("最大让利不能超过100")):a():a(new Error("请输入数字"))}}],contractratio:[{validator:function(o,e,a){e?r()(e)?r()(t.form.maximumratio)?e<1?a(new Error("最小让利不能小于1")):e>t.form.maximumratio?a(new Error("最小让利不能超过"+t.form.maximumratio)):a():e<1?a(new Error("最小让利不能小于1")):e>100?a(new Error("最小让利不能超过100")):a():a(new Error("请输入数字")):a(new Error("最小让利比例不能为空"))}}]},test:"sfsdf",data5:[],defaultProps:{children:"data",label:"name"}}},methods:{submitForm:function(){var t=this;this.$refs.form.validate(function(o){if(!o)return!1;t.form.id?Object(i.b)("post","/mall/mobile/shopcategory/updateCategory",t.form,t.updateCategory):(t.details_obj.id?t.form.parent_id=t.details_obj.id:t.form.parent_id="",console.log(t.form),Object(i.b)("post","/mall/mobile/shopcategory/addCategory",t.form,t.addCategory)),t.dialogFormVisible=!1})},updateCategory:function(t){console.log(t),this.$message({type:1==t?"success":"error",message:1==t?"修改成功!":"修改失败！"}),this.findCategory()},addCategory:function(t){console.log(t),this.$message({type:1==t?"success":"error",message:1==t?"添加成功!":"添加失败"}),this.findCategory()},append:function(t){this.dialogFormVisible=!0,this.form={categoryname:"",maximumratio:"",contractratio:"",create_by:"",parent_id:""},this.details_obj=t||{},console.log("添加下一级",this.details_obj)},remove:function(t,o){var e=this;this.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.b)("post","/mall/mobile/shopcategory/deleteCategory",{id:o.id},e.deleteCategory)}).catch(function(){})},deleteCategory:function(t){console.log(t),this.$message({showClose:!0,message:t.message,type:1==t.success?"success":"error"}),this.findCategory()},modify:function(t,o){console.log("修改",o),this.dialogFormVisible=!0,this.form=new Object,this.form.categoryname=o.categoryname,this.form.maximumratio=o.maximumratio,this.form.contractratio=o.contractratio,this.form.data=o.data,this.form.id=o.id,o.parent_id&&null!=o.parent_id&&"null"!=o.parent_id&&(this.form.parent_id=o.parent_id)},productCategory_return:function(t){this.data5=t},findCategory:function(){Object(i.b)("post","/mall/mobile/shopcategory/showCategory","",this.findCategory_returun)},findCategory_returun:function(t){console.log("分类",t),this.data5=t}},mounted:function(){this.findCategory()},created:function(){}},s={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{attrs:{id:"StoreType"}},[t._m(0),t._v(" "),e("section",{staticClass:"content"},[e("div",{staticClass:"box"},[e("div",{staticClass:"box-header"},[e("div",{staticClass:"box-title"},[t._v("行业类型设定")]),t._v(" "),e("div",{staticClass:"box-tools"},[e("button",{staticClass:"btn btn-sm btn-info",attrs:{type:"button"},on:{click:function(o){t.append(!1)}}},[t._v("添加分类")])])]),t._v(" "),e("div",{staticClass:"box-body"},[e("div",{staticClass:"block"},[e("el-tree",{attrs:{data:t.data5,"node-key":"id","default-expand-all":"",props:t.defaultProps,"expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(o){var a=o.node,r=o.data;return e("div",{staticClass:"box_1",staticStyle:{"margin-bottom":"10px"}},[e("div",{staticClass:"name"},[t._v(t._s(r.categoryname))]),t._v(" "),e("div",{staticClass:"Proportion"},[r.data&&0==r.data.length||!r.data?e("div",[t._v("\n\t\t\t\t\t\t\t        \t\t让利比例："),e("span",[t._v(t._s(r.contractratio)+"%-"+t._s(r.maximumratio?r.maximumratio+"%":"无上限"))])]):t._e()]),t._v(" "),e("span",[e("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(o){t.append(r)}}},[t._v("添加下级")]),t._v(" "),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){t.modify(a,r)}}},[t._v("设置相关参数")]),t._v(" "),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(o){t.remove(a,r)}}},[t._v("删除")])],1)])}}])})],1)])])]),t._v(" "),e("el-dialog",{attrs:{width:"500px",title:"详细信息",visible:t.dialogFormVisible},on:{"update:visible":function(o){t.dialogFormVisible=o}}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[e("el-row",[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"分类名称",prop:"categoryname","label-width":"120px"}},[e("el-input",{attrs:{required:"","auto-complete":"off"},model:{value:t.form.categoryname,callback:function(o){t.$set(t.form,"categoryname",o)},expression:"form.categoryname"}})],1)],1),t._v(" "),t.form.data&&0!=t.form.data.length?t._e():e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"最大让利比例",prop:"maximumratio","label-width":"120px"}},[e("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.maximumratio,callback:function(o){t.$set(t.form,"maximumratio",t._n(o))},expression:"form.maximumratio"}})],1)],1),t._v(" "),t.form.data&&0!=t.form.data.length?t._e():e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"最小让利比例",prop:"contractratio","label-width":"120px"}},[e("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.contractratio,callback:function(o){t.$set(t.form,"contractratio",t._n(o))},expression:"form.contractratio"}})],1)],1)],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(o){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(o){t.submitForm()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,o=this._self._c||t;return o("section",{staticClass:"content-header"},[o("h1",[this._v("\n        \t\t行业（店铺）类型管理\n    \t\t"),o("small",[this._v("Version 1.0")])]),this._v(" "),o("ol",{staticClass:"breadcrumb"},[o("li",[o("a",{attrs:{href:"javascript:;"}},[o("i",{staticClass:"fa fa-dashboard"}),this._v(" Home")])]),this._v(" "),o("li",{staticClass:"active"},[this._v("Dashboard")])])])}]};var l=e("VU/8")(n,s,!1,function(t){e("RKwH")},null,null);o.default=l.exports}});
//# sourceMappingURL=0.2bc9d08c285dddfa8c49.js.map